# =====================================================
# PICOM CONFIGURATION FILE
# =====================================================
# Documentation: https://github.com/yshui/picom
# Config created for i3 window manager dotfiles
# =====================================================

# =====================================================
# SHADOWS (Enhanced for Active Window Glow)
# =====================================================

shadow = true;
shadow-radius = 15;      # Larger radius for more prominent glow (was 12)
shadow-offset-x = -5;    # Closer to window for glow effect (was -12)
shadow-offset-y = -5;    # Closer to window for glow effect (was -12)
shadow-opacity = 0.7;    # More visible (was 0.5)

shadow-exclude = [
    "name = 'Notification'",
    "class_g = 'Conky'",
    "class_g ?= 'Notify-osd'",
    "class_g = 'Cairo-clock'",
    "_GTK_FRAME_EXTENTS@:c",
    "window_type = 'dock'",
    "window_type = 'desktop'"
];

# =====================================================
# FADING (Enhanced for Smooth Transitions)
# =====================================================

fading = true;
fade-in-step = 0.05;   # Faster fade-in (was 0.03)
fade-out-step = 0.05;  # Faster fade-out (was 0.03)
fade-delta = 3;        # Smoother transitions (was 5)

fade-exclude = [];

# =====================================================
# ANIMATIONS (Hyprland-inspired)
# =====================================================

animations = true;
animation-stiffness = 200;
animation-window-mass = 0.5;
animation-dampening = 20;
animation-clamping = false;

# Window open/close animations
animation-for-open-window = "zoom";
animation-for-unmap-window = "slide-down";

# Workspace switching animations
animation-for-workspace-switch-in = "slide-left";
animation-for-workspace-switch-out = "slide-right";

# Window movement animations
animation-for-transient-window = "slide-up";

# =====================================================
# TRANSPARENCY / OPACITY
# =====================================================

inactive-opacity = 0.95;
frame-opacity = 0.9;
active-opacity = 1.0;

opacity-rule = [
    "100:class_g = 'i3lock'",
    "100:class_g = 'feh'",
    "95:class_g = 'Alacritty' && focused",
    "90:class_g = 'Alacritty' && !focused",
    "95:class_g = 'warp-terminal' && focused",
    "90:class_g = 'warp-terminal' && !focused",
    "95:class_g = 'Code' && focused",
    "90:class_g = 'Code' && !focused"
];

# =====================================================
# BLUR (Enhanced for Eye-Candy)
# =====================================================

blur-method = "dual_kawase";
blur-strength = 8;        # Increased for more pronounced effect (was 5)
blur-background = true;
blur-background-frame = true;
blur-background-fixed = true;

blur-kern = "3x3box";

blur-background-exclude = [
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "_GTK_FRAME_EXTENTS@:c",
    "class_g = 'slop'"
];

# =====================================================
# ROUNDED CORNERS (Hyprland-inspired)
# =====================================================

corner-radius = 12;      # Increased for smoother corners (was 8)

rounded-corners-exclude = [
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "class_g = 'Polybar'",
    "class_g = 'i3bar'"
];

# =====================================================
# WINDOW BORDER GLOW (Eye-Candy Enhancement)
# =====================================================

# Add bright cyan glow to focused windows (matches border)
shadow-red = 0.3;
shadow-green = 0.88;
shadow-blue = 1.0;

# Focus-specific shadow for "active window glow" effect
focus-exclude = [];
shadow-ignore-shaped = false;

# =====================================================
# BACKEND & PERFORMANCE
# =====================================================

backend = "glx";
vsync = true;

# GLX backend optimizations
glx-no-stencil = true;
glx-no-rebind-pixmap = true;

# Use damage information to help limit the area of the screen redrawn
use-damage = true;

# Set the log level (trace, debug, info, warn, error)
log-level = "warn";

# =====================================================
# WINDOW TYPE SETTINGS
# =====================================================

wintypes:
{
    tooltip = { fade = true; shadow = true; opacity = 0.95; focus = true; full-shadow = false; };
    dock = { shadow = false; opacity = 1.0; };
    dnd = { shadow = false; };
    popup_menu = { opacity = 0.95; shadow = true; };
    dropdown_menu = { opacity = 0.95; shadow = true; };
    notification = { shadow = true; opacity = 0.95; };
};
